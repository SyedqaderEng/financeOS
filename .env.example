# =========================================
# FinanceOS Environment Variables Template
# =========================================
# Copy this file to .env.local for development
# Copy this file to .env for production
# Never commit .env.local or .env to version control
# =========================================

# =========================================
# DATABASE
# =========================================
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public

# Local Development (Docker/Local PostgreSQL)
DATABASE_URL="postgresql://postgres:password@localhost:5432/financeos_dev?schema=public"

# Production (Use your hosted database)
# Examples:
# Supabase: postgresql://postgres:[PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
# Neon: postgresql://[USER]:[PASSWORD]@[ENDPOINT].neon.tech/[DATABASE]
# Railway: postgresql://postgres:[PASSWORD]@[HOST].railway.app:5432/railway
# Heroku: postgres://[USER]:[PASSWORD]@[HOST].compute.amazonaws.com:5432/[DATABASE]
# DATABASE_URL="postgresql://..."

# Direct URL for Prisma Migrate (may be different from DATABASE_URL for pooling)
DIRECT_URL="${DATABASE_URL}"

# =========================================
# NEXT.JS & APPLICATION
# =========================================
# Node environment
NODE_ENV="development"  # development | production | test

# Application URL
NEXT_PUBLIC_APP_URL="http://localhost:3000"  # Change to your domain in production

# API URL (usually same as APP_URL)
NEXT_PUBLIC_API_URL="http://localhost:3000/api"

# =========================================
# AUTHENTICATION - NEXTAUTH.JS
# =========================================
# NextAuth.js Secret (Generate with: openssl rand -base64 32)
NEXTAUTH_SECRET="GENERATE_A_RANDOM_SECRET_HERE_MINIMUM_32_CHARS"

# NextAuth URL (same as NEXT_PUBLIC_APP_URL in most cases)
NEXTAUTH_URL="http://localhost:3000"

# Session max age (in seconds) - Default: 30 days
NEXTAUTH_SESSION_MAX_AGE=2592000

# =========================================
# OAUTH - GOOGLE
# =========================================
# Get credentials from: https://console.cloud.google.com/apis/credentials
# 1. Create a new OAuth 2.0 Client ID
# 2. Add authorized redirect URIs:
#    - http://localhost:3000/api/auth/callback/google (development)
#    - https://yourdomain.com/api/auth/callback/google (production)

GOOGLE_CLIENT_ID="your-google-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="your-google-client-secret"

# =========================================
# OAUTH - APPLE
# =========================================
# Get credentials from: https://developer.apple.com/account/resources/identifiers/list/serviceId
# 1. Create a Services ID
# 2. Configure Sign in with Apple
# 3. Add return URLs:
#    - http://localhost:3000/api/auth/callback/apple (development)
#    - https://yourdomain.com/api/auth/callback/apple (production)

APPLE_ID="your.apple.service.id"
APPLE_TEAM_ID="YOUR_TEAM_ID"
APPLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----"
APPLE_KEY_ID="YOUR_KEY_ID"

# =========================================
# EMAIL SERVICE - RESEND
# =========================================
# Get API key from: https://resend.com/api-keys
# Free tier: 100 emails/day, 3,000 emails/month

RESEND_API_KEY="re_xxxxxxxxxxxxxxxxxxxxxxxxxxxx"
RESEND_FROM_EMAIL="FinanceOS <noreply@financeos.com>"  # Must be verified domain
RESEND_SUPPORT_EMAIL="support@financeos.com"

# Alternative: SendGrid
# SENDGRID_API_KEY="SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
# SENDGRID_FROM_EMAIL="noreply@financeos.com"

# =========================================
# PLAID - BANK INTEGRATION
# =========================================
# Get credentials from: https://dashboard.plaid.com/team/keys
# Environments: sandbox | development | production

PLAID_CLIENT_ID="your_plaid_client_id"
PLAID_SECRET="your_plaid_secret_for_environment"  # Different for each environment
PLAID_ENV="sandbox"  # sandbox | development | production

# Public key for Plaid Link (client-side)
NEXT_PUBLIC_PLAID_ENV="sandbox"

# Webhook URL (must be publicly accessible, use ngrok for local testing)
PLAID_WEBHOOK_URL="https://yourdomain.com/api/webhooks/plaid"

# Products to enable (comma-separated)
PLAID_PRODUCTS="transactions,auth,identity,balance"

# Country codes (comma-separated)
PLAID_COUNTRY_CODES="US,CA"

# =========================================
# STRIPE - PAYMENT PROCESSING
# =========================================
# Get keys from: https://dashboard.stripe.com/apikeys
# Use test keys for development, live keys for production

# Secret key (server-side only)
STRIPE_SECRET_KEY="sk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"  # or sk_live_ for production

# Publishable key (client-side)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"  # or pk_live_ for production

# Webhook signing secret (for verifying webhook events)
# Get from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET="whsec_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# Price IDs for subscription plans
STRIPE_PRICE_ID_BASIC_MONTHLY="price_xxxxxxxxxxxxx"
STRIPE_PRICE_ID_BASIC_YEARLY="price_xxxxxxxxxxxxx"
STRIPE_PRICE_ID_PLUS_MONTHLY="price_xxxxxxxxxxxxx"
STRIPE_PRICE_ID_PLUS_YEARLY="price_xxxxxxxxxxxxx"
STRIPE_PRICE_ID_FAMILY_MONTHLY="price_xxxxxxxxxxxxx"
STRIPE_PRICE_ID_FAMILY_YEARLY="price_xxxxxxxxxxxxx"

# =========================================
# AWS S3 - FILE STORAGE
# =========================================
# For storing receipts, reports, and user uploads
# Get credentials from: https://console.aws.amazon.com/iam/

AWS_ACCESS_KEY_ID="AKIAXXXXXXXXXXXXXXXX"
AWS_SECRET_ACCESS_KEY="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
AWS_REGION="us-east-1"  # Choose your preferred region
AWS_S3_BUCKET="financeos-user-uploads-production"  # Your bucket name

# CloudFront CDN URL (optional, for faster file delivery)
AWS_CLOUDFRONT_URL="https://xxxxxxxxxxxxxx.cloudfront.net"

# Alternative: Cloudinary
# CLOUDINARY_CLOUD_NAME="your_cloud_name"
# CLOUDINARY_API_KEY="your_api_key"
# CLOUDINARY_API_SECRET="your_api_secret"

# =========================================
# ERROR TRACKING - SENTRY
# =========================================
# Get DSN from: https://sentry.io/settings/projects/

SENTRY_DSN="https://xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx@o000000.ingest.sentry.io/0000000"
SENTRY_ORG="your-organization"
SENTRY_PROJECT="financeos"

# Sentry Auth Token (for source maps upload)
SENTRY_AUTH_TOKEN="your_sentry_auth_token"

# Error sample rate (0.0 to 1.0)
SENTRY_TRACES_SAMPLE_RATE="0.1"  # 10% of transactions

# =========================================
# ANALYTICS (Optional)
# =========================================
# Google Analytics
NEXT_PUBLIC_GA_MEASUREMENT_ID="G-XXXXXXXXXX"

# PostHog (Alternative)
# NEXT_PUBLIC_POSTHOG_KEY="phc_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
# NEXT_PUBLIC_POSTHOG_HOST="https://app.posthog.com"

# Mixpanel (Alternative)
# NEXT_PUBLIC_MIXPANEL_TOKEN="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# =========================================
# FEATURE FLAGS
# =========================================
# Enable/disable features

NEXT_PUBLIC_ENABLE_PLAID="true"
NEXT_PUBLIC_ENABLE_INVESTMENTS="true"
NEXT_PUBLIC_ENABLE_CRYPTO_TRACKING="false"
NEXT_PUBLIC_ENABLE_AI_INSIGHTS="false"  # Future feature

# =========================================
# RATE LIMITING & SECURITY
# =========================================
# Rate limiting (requests per time window)
RATE_LIMIT_MAX_REQUESTS="100"
RATE_LIMIT_WINDOW_MS="900000"  # 15 minutes in milliseconds

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS="http://localhost:3000,https://yourdomain.com"

# Encryption key for sensitive data (Generate with: openssl rand -hex 32)
ENCRYPTION_KEY="your_64_character_hex_encryption_key_here_minimum_32_bytes"

# =========================================
# REDIS (Optional - for caching and sessions)
# =========================================
# Use for production to improve performance

# REDIS_URL="redis://default:password@localhost:6379"
# REDIS_TLS_URL="rediss://default:password@your-redis-host:6380"  # For production with TLS

# =========================================
# WEBSOCKET / REAL-TIME (Optional)
# =========================================
# For real-time updates across devices

# PUSHER_APP_ID="your_pusher_app_id"
# PUSHER_KEY="your_pusher_key"
# PUSHER_SECRET="your_pusher_secret"
# PUSHER_CLUSTER="us2"
# NEXT_PUBLIC_PUSHER_KEY="${PUSHER_KEY}"
# NEXT_PUBLIC_PUSHER_CLUSTER="${PUSHER_CLUSTER}"

# Alternative: Ably
# ABLY_API_KEY="your_ably_api_key"
# NEXT_PUBLIC_ABLY_CLIENT_ID="financeos"

# =========================================
# CRON JOBS & BACKGROUND TASKS
# =========================================
# Secret for authenticating cron job requests
CRON_SECRET="your_random_cron_secret_for_authenticating_webhook_calls"

# =========================================
# LOGGING
# =========================================
# Log level: error | warn | info | debug
LOG_LEVEL="info"  # Use "debug" in development, "warn" or "error" in production

# =========================================
# TESTING
# =========================================
# Test database (separate from development)
TEST_DATABASE_URL="postgresql://postgres:password@localhost:5432/financeos_test?schema=public"

# =========================================
# MISC
# =========================================
# Application timezone
TZ="America/New_York"

# Maximum file upload size (in bytes) - 10MB
MAX_FILE_UPLOAD_SIZE="10485760"

# Support email
SUPPORT_EMAIL="support@financeos.com"

# =========================================
# NOTES
# =========================================
# - Never commit .env.local or .env files to git
# - Use strong, unique secrets for production
# - Rotate secrets periodically
# - Use different keys for development and production
# - Store production secrets in your hosting provider's environment variables
# - For Vercel: Dashboard > Project > Settings > Environment Variables
# - For Railway: Dashboard > Project > Variables
# - For AWS: Use AWS Secrets Manager
# =========================================

# =========================================
# QUICK SETUP CHECKLIST
# =========================================
# [ ] 1. Copy this file to .env.local
# [ ] 2. Generate NEXTAUTH_SECRET
# [ ] 3. Set up PostgreSQL database
# [ ] 4. Configure OAuth providers (Google, Apple)
# [ ] 5. Sign up for Plaid (sandbox for testing)
# [ ] 6. Sign up for Stripe (test mode)
# [ ] 7. Sign up for email service (Resend or SendGrid)
# [ ] 8. Set up AWS S3 bucket or Cloudinary
# [ ] 9. Set up Sentry for error tracking
# [ ] 10. Run: npx prisma migrate dev
# [ ] 11. Run: npm run dev
# [ ] 12. Test authentication flows
# =========================================
